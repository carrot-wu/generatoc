var generatoc=function(){"use strict";var e,n="",r="",t="#toc",l=[];function o(e){return e[e.length-1]}function c(e){return+e.substr(1)}function i(e){Array.prototype.forEach.call(e.children,(function(e){var n=e.querySelectorAll("ul");n&&Array.prototype.forEach.call(n,(function(e){e&&(e.style.display="none")}))}))}function u(n){var r=n.target.getAttribute("data-toc-index");e[+r].scrollIntoView({behavior:"smooth"})}function a(e){e.stopPropagation(),i(document.querySelector(t));var n=e.target,r=function e(n){if(n&&n.children[0])return"ul"===n.children[0].tagName.toLowerCase()?(Array.prototype.forEach.call(n.children,(function(e){e.style.display="block"})),e(n.children[0])):n.children}(n.children[1]);r&&Array.prototype.forEach.call(r,(function(e){e.style.display="block"})),function e(n){n.id!==t.substr(1)&&(Array.prototype.forEach.call(n.children,(function(e){e.style.display="block"})),e(n.parentElement))}(n)}function d(e){var n=document.createElement("ul");if(e.ele){var r=function(e,n){var r=document.createElement("li");r.setAttribute("style","cursor: pointer;");var t=document.createElement("a");return t.setAttribute("data-toc-index",n.toString()),t.innerHTML=e||"",r.appendChild(t),r}(e.ele.textContent,e.index);r.addEventListener("click",u),function(e){e.addEventListener("click",a)}(n),n.append(r)}return e.children.length>0&&e.children.forEach((function(e){n.append(d(e))})),n}function h(e,n,r,t){var l=c(e.localName),i=n?c(n.localName):0,u={index:t,level:l,ele:null,children:[]};if(l===i)u.ele=e,u.level=l,function(e){if(0===e.length)return e;for(var n=o(e),r=e;0!==n.children.length;)r=n.children,n=o(n.children);return r}(r).push(u);else if(l>i){var a=l-i;(function(e){for(var n=e;0!==n.length;)n=o(n).children;return n})(r).push(function e(n,r,t,l){var o={index:l,level:null,ele:null,children:[]};return n<=0?(o.level=t,o.ele=r):(o.level=t-n,o.children=[e(--n,r,t,l)]),o}(a-1,e,l,t))}else u.ele=e,function(e,n,r){for(var t=o(n),l={index:r,level:null,ele:null,children:n};(!t.ele||t.level!==e)&&(l=t,void 0!==(t=o(t.children))););return l}(l,r,t).children.push(u)}var f={init:function(o){var c,u=o.content,a=o.heading,f=void 0===a?["h2","h3","h4","h5"]:a,s=o.selector;t=void 0===s?"#toc":s,r=f.join(","),n=u,(e=document.querySelector(n).querySelectorAll(r)).forEach((function(n,r){h(n,0===r?null:e[r-1],l,r)})),null===(c=document.querySelector(t))&&console.error("Toc element not found!"),l[0]&&(l[0].index=-1,Array.prototype.forEach.call(l[0].children,(function(e){c.appendChild(d(e))})),i(c))},destroy:function(){var e=document.querySelector(t);e&&(e.querySelectorAll("ul").forEach((function(e){e.removeEventListener("click",a)})),e.querySelectorAll("li").forEach((function(e){e.removeEventListener("click",u)})),l=[],e.innerHTML="")},refresh:function(){f.destroy(),f.init({content:n,heading:r.split(","),selector:t})}};return f}();
