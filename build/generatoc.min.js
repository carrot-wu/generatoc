var generatoc=function(){"use strict";var e,n="",t="",r="#toc",l=[];function o(e){return e[e.length-1]}function c(e){return+e.substr(1)}function i(e){Array.prototype.forEach.call(e.children,(function(e){var n=e.querySelectorAll("ul");n&&Array.prototype.forEach.call(n,(function(e){e&&(e.style.display="none")}))}))}function u(n){var t=n.target.getAttribute("data-toc-index");e[+t].scrollIntoView({behavior:"smooth"})}function a(e){e.stopPropagation(),console.log(e),i(document.querySelector(r));var n=e.target,t=function e(n){if(n&&n.children[0])return"ul"===n.children[0].tagName.toLowerCase()?(Array.prototype.forEach.call(n.children,(function(e){e.style.display="block"})),e(n.children[0])):n.children}(n.parentElement.parentElement.children[1]);t&&Array.prototype.forEach.call(t,(function(e){e.style.display="block"})),function e(n){n.id!==r.substr(1)&&(Array.prototype.forEach.call(n.children,(function(e){e.style.display="block"})),e(n.parentElement))}(n)}function d(e){var n=document.createElement("ul");if(e.ele){var t=function(e,n){var t=document.createElement("li");t.setAttribute("style","cursor: pointer;");var r=document.createElement("a");return r.setAttribute("data-toc-index",n.toString()),r.innerHTML=e||"",t.appendChild(r),t}(e.ele.textContent,e.index);t.addEventListener("click",u),function(e){e.addEventListener("click",a)}(n),n.append(t)}return e.children.length>0&&e.children.forEach((function(e){n.append(d(e))})),n}function h(e,n,t,r){var l=c(e.localName),i=n?c(n.localName):0,u={index:r,level:l,ele:null,children:[]};if(l===i)u.ele=e,u.level=l,function(e){if(0===e.length)return e;for(var n=o(e),t=e;0!==n.children.length;)t=n.children,n=o(n.children);return t}(t).push(u);else if(l>i){var a=l-i;(function(e){for(var n=e;0!==n.length;)n=o(n).children;return n})(t).push(function e(n,t,r,l){var o={index:l,level:null,ele:null,children:[]};return n<=0?(o.level=r,o.ele=t):(o.level=r-n,o.children=[e(--n,t,r,l)]),o}(a-1,e,l,r))}else u.ele=e,function(e,n,t){for(var r=o(n),l={index:t,level:null,ele:null,children:n};(!r.ele||r.level!==e)&&(l=r,void 0!==(r=o(r.children))););return l}(l,t,r).children.push(u)}var f={init:function(o){var c,u=o.content,a=o.heading,f=void 0===a?["h2","h3","h4","h5"]:a,s=o.selector;r=void 0===s?"#toc":s,t=f.join(","),n=u,(e=document.querySelector(n).querySelectorAll(t)).forEach((function(n,t){h(n,0===t?null:e[t-1],l,t)})),null===(c=document.querySelector(r))&&console.error("Toc element not found!"),l[0]&&(l[0].index=-1,Array.prototype.forEach.call(l[0].children,(function(e){c.appendChild(d(e))})),i(c))},destroy:function(){var e=document.querySelector(r);e&&(e.querySelectorAll("ul").forEach((function(e){e.removeEventListener("click",a)})),e.querySelectorAll("li").forEach((function(e){e.removeEventListener("click",u)})),l=[],e.innerHTML="")},refresh:function(){f.destroy(),f.init({content:n,heading:t.split(","),selector:r})}};return f}();
